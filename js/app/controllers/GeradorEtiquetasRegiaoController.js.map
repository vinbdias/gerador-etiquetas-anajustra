{"version":3,"sources":["../../app-es6/controllers/GeradorEtiquetasRegiaoController.js"],"names":["GeradorEtiquetasRegiaoController","_inputSubmit","$","_elementoListaRegioes","_containerDeMensagemDeErro","hide","_regiaoService","RegiaoService","_geradorEtiquetasService","GeradorEtiquetasService","_regioes","_buscaRegioes","obterRegioes","then","html","regioes","forEach","push","regiao","append","id","lotacao","prop","catch","console","log","erro","evento","preventDefault","gerarEtiquetasRegiao","htmlAnterior","htmlAConcatenar","resposta","nomeXlsx"],"mappings":";;;;;;IAAMA,gC;AAEF,gDAAc;AAAA;;AAEV,aAAKC,YAAL,GAAoBC,EAAE,kBAAF,CAApB;;AAEA,aAAKC,qBAAL,GAA6BD,EAAE,gBAAF,CAA7B;;AAEA,aAAKE,0BAAL,GAAkCF,EAAE,0BAAF,CAAlC;AACA,aAAKE,0BAAL,CAAgCC,IAAhC;;AAEA,aAAKC,cAAL,GAAsB,IAAIC,aAAJ,EAAtB;AACA,aAAKC,wBAAL,GAAgC,IAAIC,uBAAJ,EAAhC;;AAEA,aAAKC,QAAL,GAAgB,EAAhB;;AAEA,aAAKC,aAAL;AACH;;;;wCAEe;AAAA;;AAEZ,iBAAKL,cAAL,CACCM,YADD,GAECC,IAFD,CAEM,mBAAW;;AAEb,sBAAKV,qBAAL,CAA2BW,IAA3B,CAAgC,EAAhC;AACAC,wBAAQC,OAAR,CAAgB,kBAAU;;AAEtB,0BAAKN,QAAL,CAAcO,IAAd,CAAmBC,MAAnB;AACA,0BAAKf,qBAAL,CAA2BgB,MAA3B,CAAkC,oBAAoBD,OAAOE,EAA3B,GAAgC,IAAhC,GAAuCF,OAAOG,OAA9C,GAAwD,OAA1F;AACH,iBAJD;;AAMA,sBAAKpB,YAAL,CAAkBqB,IAAlB,CAAuB,UAAvB,EAAmC,KAAnC;AACH,aAZD,EAaCC,KAbD,CAaO;AAAA,uBAAQC,QAAQC,GAAR,CAAYC,IAAZ,CAAR;AAAA,aAbP;AAcH;;;0CAGiBC,M,EAAQ;AAAA;;AAEtBA,mBAAOC,cAAP;;AAEA,iBAAKlB,QAAL,CAAcM,OAAd,CAAsB,kBAAU;;AAE5B,uBAAKR,wBAAL,CACKqB,oBADL,CAC0BX,MAD1B,EAEKL,IAFL,CAEU,oBAAY;;AAEd,wBAAIiB,eAAe5B,EAAE,aAAagB,OAAOE,EAAtB,EAA0BN,IAA1B,EAAnB;AACA,wBAAIiB,kBAAkB,gEAChB,WADgB,GACFC,SAASC,QADP,GACkB,iCADxC;;AAGA/B,sBAAE,aAAagB,OAAOE,EAAtB,EAA0BN,IAA1B,CAA+B,EAA/B;AACAZ,sBAAE,aAAagB,OAAOE,EAAtB,EAA0BN,IAA1B,CAA+BgB,eAAeC,eAA9C;AAEH,iBAXL,EAYKR,KAZL,CAYW,gBAAQ;;AAEX,wBAAIO,eAAe5B,EAAE,aAAagB,OAAOE,EAAtB,EAA0BN,IAA1B,EAAnB;AACA,wBAAIiB,kBAAkB,4DAAtB;;AAEA7B,sBAAE,aAAagB,OAAOE,EAAtB,EAA0BN,IAA1B,CAA+B,EAA/B;AACAZ,sBAAE,aAAagB,OAAOE,EAAtB,EAA0BN,IAA1B,CAA+BgB,eAAeC,eAA9C;AACAP,4BAAQC,GAAR,CAAYC,IAAZ;AAEH,iBArBL;AAsBH,aAxBD;AA0BH","file":"GeradorEtiquetasRegiaoController.js","sourcesContent":["class GeradorEtiquetasRegiaoController {\r\n\r\n    constructor() {\r\n\r\n        this._inputSubmit = $('#gerar-etiquetas');\r\n\r\n        this._elementoListaRegioes = $('#lista-regioes');        \r\n\r\n        this._containerDeMensagemDeErro = $('#container-mensagem-erro');\r\n        this._containerDeMensagemDeErro.hide();\r\n        \r\n        this._regiaoService = new RegiaoService();\r\n        this._geradorEtiquetasService = new GeradorEtiquetasService();\r\n\r\n        this._regioes = [];\r\n\r\n        this._buscaRegioes();\r\n    }\r\n\r\n    _buscaRegioes() {\r\n\r\n        this._regiaoService\r\n        .obterRegioes()\r\n        .then(regioes => {\r\n\r\n            this._elementoListaRegioes.html('');\r\n            regioes.forEach(regiao => {\r\n\r\n                this._regioes.push(regiao);\r\n                this._elementoListaRegioes.append('<li id=\"regiao-' + regiao.id + '\">' + regiao.lotacao + '</li>');\r\n            });    \r\n\r\n            this._inputSubmit.prop('disabled', false);\r\n        })        \r\n        .catch(erro => console.log(erro));\r\n    }\r\n\r\n\r\n    submeteFormulario(evento) {\r\n\r\n        evento.preventDefault();        \r\n        \r\n        this._regioes.forEach(regiao => {\r\n\r\n            this._geradorEtiquetasService\r\n                .gerarEtiquetasRegiao(regiao)\r\n                .then(resposta => {\r\n\r\n                    let htmlAnterior = $('#regiao-' + regiao.id).html();\r\n                    let htmlAConcatenar = ' <span style=\"color: green;\">etiquetas geradas com sucesso ' + \r\n                          '<a href=\"' + resposta.nomeXlsx + '\">Arquivo para envio</a></span>';\r\n\r\n                    $('#regiao-' + regiao.id).html('');\r\n                    $('#regiao-' + regiao.id).html(htmlAnterior + htmlAConcatenar);\r\n                    \r\n                })\r\n                .catch(erro => {\r\n\r\n                    let htmlAnterior = $('#regiao-' + regiao.id).html();\r\n                    let htmlAConcatenar = '<span style=\"color: red;\"> erro ao gerar etiquetas!</span>';\r\n\r\n                    $('#regiao-' + regiao.id).html('');\r\n                    $('#regiao-' + regiao.id).html(htmlAnterior + htmlAConcatenar);\r\n                    console.log(erro);\r\n\r\n                });            \r\n        });\r\n        \r\n    }\r\n}"]}