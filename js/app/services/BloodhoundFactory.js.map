{"version":3,"sources":["../../app-es6/services/BloodhoundFactory.js"],"names":["BloodhoundFactory","remoteUrl","Error","Bloodhound","datumTokenizer","datum","tokenizers","whitespace","value","queryTokenizer","remote","url","filter","associados","$","map","associado","id","nome","cpf"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,oBAAqB,YAAW;;AAEhC;AACA,QAAMC,YAAY,oCAAlB,CAHgC,CAGwB;;AAExD;;AAEI;;;AAGA,qCAAc;AAAA;;AAEV;AACA,kBAAM,IAAIC,KAAJ,CAAU,uDAAV,CAAN;AACH;;AAED;;;;;;AAXJ;AAAA;AAAA,4CAe2B;;AAEnB,uBAAO,IAAIC,UAAJ,CAAe;AAClBC,oCAAgB,wBAAUC,KAAV,EAAiB;;AAE7B,+BAAOF,WAAWG,UAAX,CAAsBC,UAAtB,CAAiCF,MAAMG,KAAvC,CAAP;AACH,qBAJiB;AAKlBC,oCAAgBN,WAAWG,UAAX,CAAsBC,UALpB;AAMlBG,4BAAQ;AACJC,6BAAKV,SADD;AAEJW,gCAAQ,gBAAUC,UAAV,EAAsB;;AAE1B;AACA,mCAAOC,EAAEC,GAAF,CAAMF,UAAN,EAAkB,UAAUG,SAAV,EAAqB;;AAE1C,uCAAO;AACHC,wCAAID,UAAUC,EADX;AAEHC,0CAAMF,UAAUE,IAFb;AAGHC,yCAAKH,UAAUG;AAHZ,iCAAP;AAKH,6BAPM,CAAP;AAQH;AAbG;AANU,iBAAf,CAAP;AAsBH;AAvCL;;AAAA;AAAA;AAyCH,CA9CuB,EAAxB","file":"BloodhoundFactory.js","sourcesContent":["/**\r\n * Classe factory responsável por abstrair a instanciação do Bloodhound. Motor de pesquisa a ser usado como fonte de dados do plugin TypeAhead, do jQuery\r\n */\r\nvar BloodhoundFactory = (function() {\r\n\r\n    //Constante que armazena a url para qual o Bloodhound vai fazer suas requisições assíncronas de pesquisa\r\n    const remoteUrl = 'pesquisa-nome-cpf.php?query=%QUERY'; //o parâmetro %QUERY da \"queryString\" da url nada mais é do que o valor do input, contendo o TypeAhead, que utilizará esta instância do Bloodhound\r\n\r\n    return class BloodhoundFactory {\r\n\r\n        /**\r\n         * Método construtor. Não deve ser acessado, já que a factory é uma classe abstrata. Não podendo ser instanciada\r\n         */\r\n        constructor() {\r\n\r\n            //Lança um erro caso tente-se instanciar BloodhoundFactory\r\n            throw new Error('Não é possível criar instâncias de BloodhoundFactory.');\r\n        }\r\n\r\n        /**\r\n         * Método estático responsável por retornar uma instância do Bloodhound, configurada para retornar um json de associados\r\n         *  a servir de fonte de dados para o plugin TypeAhead, do jQuery\r\n         */\r\n        static getBloodhound() {\r\n\r\n            return new Bloodhound({\r\n                datumTokenizer: function (datum) {\r\n\r\n                    return Bloodhound.tokenizers.whitespace(datum.value);\r\n                },\r\n                queryTokenizer: Bloodhound.tokenizers.whitespace,\r\n                remote: {\r\n                    url: remoteUrl,\r\n                    filter: function (associados) {\r\n                        \r\n                        // Usa a função map, do jQuery, para formatar o json\r\n                        return $.map(associados, function (associado) {\r\n\r\n                            return {       \r\n                                id: associado.id,                     \r\n                                nome: associado.nome,\r\n                                cpf: associado.cpf\r\n                            };\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n})();\r\n"]}